<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <%= link_to t('project.name_html'), root_path, class: 'navbar-brand' %>
  <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbars" aria-controls="navbars" aria-expanded="false" aria-label="<%= t('actions.toggle_menu') %>">
    <span class="navbar-toggler-icon"></span>
  </button>
  <% if user_signed_in? %>
  <div class="navbar-collapse collapse" id="navbars">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <%= link_to t('navbar.subscriptions_html'), subscriptions_path, class: 'nav-link' if can? :read, Subscription %>
      </li>
      <li class="nav-item">
        <%= link_to t('navbar.members_html'), members_path, class: 'nav-link' if can? :read, Member %>
      </li>
      <li class="nav-item">
        <%= link_to t('navbar.producers_html'), producers_path, class: 'nav-link' if can? :read, Producer %>
      </li>
      <% links = [] %>
      <% links << link_to(t('navbar.users'), users_path, class: 'dropdown-item') if can? :read, User %>
      <% if links.present? %>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="adminMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <%= t('navbar.administration_html') %>
        </a>
        <div class="dropdown-menu" aria-labelledby="adminMenuLink">
          <%= safe_join links %>
        </div>
      </li>
      <% end %>
    </ul>
    <ul class="navbar-nav">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="userMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <%= t('project.welcome_html', user: current_user.first_name) %>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userMenuLink">
          <%= link_to(t('devise.shared.links.sign_out_html'), destroy_session_path(current_user), method: :delete, class: 'dropdown-item') %>
        </div>
      </li>
    </ul>
  </div>
  <% end %>
</nav>
